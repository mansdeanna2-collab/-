(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e8c08e0"],{1148:function(t,e,a){"use strict";var o=a("5926"),r=a("577e"),n=a("1d80"),i=RangeError;t.exports=function(t){var e=r(n(this)),a="",l=o(t);if(l<0||l===1/0)throw new i("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(e+=e))1&l&&(a+=e);return a}},4582:function(t,e,a){"use strict";a.r(e);a("e9f5"),a("a732"),a("d3b7");var o=function(){var t=this,e=t._self._c;return e("div",[e("el-table",{staticStyle:{width:"100%","margin-top":"25px"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{prop:"memberCode",align:"center",label:"用户ID"}}),e("el-table-column",{attrs:{prop:"memberName",align:"center",label:"用户名"}}),e("el-table-column",{attrs:{prop:"realName",align:"center",label:"真实姓名"}}),e("el-table-column",{attrs:{prop:"idCardNo",align:"center",label:"账户"}}),e("el-table-column",{attrs:{prop:"issuingBank",align:"center",label:"发卡行"}}),e("el-table-column",{attrs:{prop:"cashAmount",align:"center",label:"现金金额"}}),e("el-table-column",{attrs:{align:"center",label:"提现状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.recordStatus?e("el-tag",{attrs:{type:"warning"}},[t._v("待发放")]):1==a.row.recordStatus?e("el-tag",{attrs:{type:"success"}},[t._v("已发放")]):2==a.row.recordStatus?e("el-tag",{attrs:{type:"danger"}},[t._v("发放失败")]):e("span",[t._v(t._s(a.row.recordStatus))])]}}])}),t.tableData.some((function(t){return t.content&&2==t.recordStatus}))?e("el-table-column",{attrs:{align:"center",label:"拒绝理由",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.content&&2==a.row.recordStatus?e("span",{staticStyle:{color:"#F56C6C"},attrs:{title:a.row.content}},[t._v(" "+t._s(a.row.content)+" ")]):e("span",[t._v("-")])]}}],null,!1,2085829882)}):t._e(),e("el-table-column",{attrs:{align:"center",label:"操作",width:"400"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.recordStatus?e("el-button",{staticClass:"primary",attrs:{type:"primary",size:"default"},on:{click:function(e){return t.check(a.row)}}},[t._v(" 发放 ")]):t._e(),0==a.row.recordStatus?e("el-button",{staticClass:"warning",attrs:{type:"warning",size:"default"},on:{click:function(e){return t.openRejectDialog(a.row)}}},[t._v(" 拒绝 ")]):t._e(),e("el-button",{attrs:{type:"info",size:"default"},on:{click:function(e){return t.viewFlow(a.row)}}},[t._v(" 查看流水 ")])]}}])})],1),e("el-pagination",{staticClass:"paginationClass",staticStyle:{"margin-top":"10px"},attrs:{"current-page":t.pageNum,"page-size":t.pageSize,"page-sizes":[10,20,50,100],layout:"total ,sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),e("el-dialog",{attrs:{title:"拒绝提现申请",visible:t.rejectDialogVisible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(e){t.rejectDialogVisible=e}}},[e("el-form",{attrs:{model:t.rejectForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"拒绝理由"}},[e("el-radio-group",{model:{value:t.rejectForm.rejectReasonType,callback:function(e){t.$set(t.rejectForm,"rejectReasonType",e)},expression:"rejectForm.rejectReasonType"}},[e("el-radio",{attrs:{label:"flow_insufficient"}},[t._v("流水不足")]),e("el-radio",{attrs:{label:"account_abnormal"}},[t._v("账户异常")]),e("el-radio",{attrs:{label:"custom"}},[t._v("自定义")])],1)],1),"custom"===t.rejectForm.rejectReasonType?e("el-form-item",{attrs:{label:"自定义理由"}},[e("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入拒绝理由",maxlength:"200","show-word-limit":""},model:{value:t.rejectForm.customReason,callback:function(e){t.$set(t.rejectForm,"customReason",e)},expression:"rejectForm.customReason"}})],1):t._e(),"custom"!==t.rejectForm.rejectReasonType?e("el-form-item",{attrs:{label:"备注说明"}},[e("el-input",{attrs:{type:"textarea",rows:3,placeholder:"可填写补充说明（可选）",maxlength:"200","show-word-limit":""},model:{value:t.rejectForm.remark,callback:function(e){t.$set(t.rejectForm,"remark",e)},expression:"rejectForm.remark"}})],1):t._e()],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.rejectDialogVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"warning"},on:{click:t.confirmReject}},[t._v("确认拒绝")])],1)],1),e("el-dialog",{attrs:{title:"查看流水",visible:t.flowDialogVisible,width:"90%","close-on-click-modal":!1},on:{"update:visible":function(e){t.flowDialogVisible=e}}},[e("div",{staticStyle:{"margin-bottom":"15px"}},[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("用户ID：")]),t._v(t._s(t.currentUser.memberCode)+"    "),e("span",{staticStyle:{"font-weight":"bold"}},[t._v("用户名：")]),t._v(t._s(t.currentUser.memberName)+" ")]),e("div",{staticStyle:{"margin-bottom":"15px",display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",[e("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.onFlowDateChange},model:{value:t.flowDateRange,callback:function(e){t.flowDateRange=e},expression:"flowDateRange"}}),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.queryFlowData}},[t._v("查询")]),e("el-button",{on:{click:t.clearFlowDateRange}},[t._v("清除")])],1)]),e("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticStyle:{color:"#909399","font-size":"14px","margin-bottom":"5px"}},[t._v("总有效投注")]),e("div",{staticStyle:{color:"#67C23A","font-size":"20px","font-weight":"bold"}},[t._v(t._s(t.formatAmount(t.flowStatistics.totalValidBetAmount)))])])])],1),e("el-col",{attrs:{span:6}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticStyle:{color:"#909399","font-size":"14px","margin-bottom":"5px"}},[t._v("选中日期有效投注")]),e("div",{staticStyle:{color:"#409EFF","font-size":"20px","font-weight":"bold"}},[t._v(t._s(t.formatAmount(t.flowStatistics.selectedValidBetAmount)))])])])],1),e("el-col",{attrs:{span:6}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticStyle:{color:"#909399","font-size":"14px","margin-bottom":"5px"}},[t._v("总盈亏")]),e("div",{style:{color:parseFloat(t.flowStatistics.totalNetAmount||0)>=0?"#67C23A":"#F56C6C",fontSize:"20px",fontWeight:"bold"}},[t._v(" "+t._s(t.formatAmount(t.flowStatistics.totalNetAmount))+" ")])])])],1),e("el-col",{attrs:{span:6}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{staticStyle:{"text-align":"center"}},[e("div",{staticStyle:{color:"#909399","font-size":"14px","margin-bottom":"5px"}},[t._v("选中日期盈亏")]),e("div",{style:{color:parseFloat(t.flowStatistics.selectedNetAmount||0)>=0?"#67C23A":"#F56C6C",fontSize:"20px",fontWeight:"bold"}},[t._v(" "+t._s(t.formatAmount(t.flowStatistics.selectedNetAmount))+" ")])])])],1)],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.flowData,border:"","max-height":600}},[e("el-table-column",{attrs:{prop:"billNo",align:"center",label:"账单号",width:"180","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"username",align:"center",label:"游戏账号",width:"140","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"code",align:"center",label:"玩法","min-width":"120","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"playType",align:"center",label:"游戏类型","min-width":"120","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"betAmount",align:"center",label:"投注金额",width:"140"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(a.row.betAmount||"0.00"))])]}}])}),e("el-table-column",{attrs:{prop:"validBetAmount",align:"center",label:"有效投注",width:"140"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(a.row.validBetAmount||"0.00"))])]}}])}),e("el-table-column",{attrs:{prop:"netAmount",align:"center",label:"盈亏金额",width:"140"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{style:{color:parseFloat(a.row.netAmount||0)>=0?"#67C23A":"#F56C6C"}},[t._v(" "+t._s(parseFloat(a.row.netAmount||0)>=0?"+":"")+t._s(a.row.netAmount||"0.00")+" ")])]}}])}),e("el-table-column",{attrs:{prop:"status",align:"center",label:"状态",width:"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.status?e("el-tag",{attrs:{type:"success"}},[t._v("已结算")]):0==a.row.status?e("el-tag",{attrs:{type:"warning"}},[t._v("未结算")]):e("el-tag",{attrs:{type:"info"}},[t._v(t._s(a.row.status))])]}}])}),e("el-table-column",{attrs:{prop:"betTime",align:"center",label:"投注时间",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.betTime?t.formatTimestamp(e.row.betTime):"-")+" ")]}}])})],1),t.flowTotal>0?e("el-pagination",{staticStyle:{"margin-top":"15px","text-align":"right"},attrs:{"current-page":t.flowPageNum,"page-size":t.flowPageSize,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",total:t.flowTotal},on:{"size-change":t.handleFlowSizeChange,"current-change":t.handleFlowCurrentChange}}):t._e(),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.flowDialogVisible=!1}}},[t._v("关闭")])],1)],1)],1)},r=[],n=(a("b680"),a("ac1f"),a("25f0"),a("5319"),a("498a"),a("fc95")),i={data:function(){return{tableData:[],total:10,pageNum:1,pageSize:10,rejectDialogVisible:!1,rejectForm:{recordId:null,rejectReasonType:"flow_insufficient",customReason:"",remark:""},flowDialogVisible:!1,flowData:[],flowTotal:0,flowPageNum:1,flowPageSize:10,flowDateRange:null,flowStartTime:null,flowEndTime:null,flowStatistics:{totalValidBetAmount:0,selectedValidBetAmount:0,totalNetAmount:0,selectedNetAmount:0},currentUser:{memberCode:"",memberName:""}}},created:function(){this.initTableData()},computed:{},methods:{initTableData:function(){var t=this;Object(n["c"])({isAgency:0,current:this.pageNum,size:this.pageSize}).then((function(e){console.log(e),t.tableData=e.data.records,t.total=parseInt(e.data.total)}))},handleSizeChange:function(t){this.pageSize=t,this.initTableData()},handleCurrentChange:function(t){this.pageNum=t,this.initTableData()},check:function(t){var e=this;this.$confirm("确认发放该笔提现？","提示",{type:"warning"}).then((function(){Object(n["a"])({recordId:t.id}).then((function(t){e.$message.success("发放成功"),e.initTableData()})).catch((function(t){e.$message.error("发放失败："+(t.msg||"未知错误"))}))})).catch((function(){}))},openRejectDialog:function(t){this.rejectForm={recordId:t.id,rejectReasonType:"flow_insufficient",customReason:"",remark:""},this.rejectDialogVisible=!0},confirmReject:function(){var t=this;if("custom"!==this.rejectForm.rejectReasonType||this.rejectForm.customReason.trim()){var e="";e="flow_insufficient"===this.rejectForm.rejectReasonType?"流水不足":"account_abnormal"===this.rejectForm.rejectReasonType?"账户异常":this.rejectForm.customReason.trim(),this.rejectForm.remark&&"custom"!==this.rejectForm.rejectReasonType&&(e+="；"+this.rejectForm.remark),this.$confirm("确认拒绝该笔提现申请？理由：".concat(e),"提示",{type:"warning"}).then((function(){Object(n["b"])({recordId:t.rejectForm.recordId,rejectReason:e}).then((function(e){t.$message.success("拒绝成功"),t.rejectDialogVisible=!1,t.initTableData()})).catch((function(e){t.$message.error("拒绝失败："+(e.msg||"未知错误"))}))})).catch((function(){}))}else this.$message.warning("请输入自定义拒绝理由")},viewFlow:function(t){this.currentUser={memberCode:t.memberCode,memberName:t.memberName||"-"},this.flowPageNum=1,this.flowPageSize=10,this.flowDateRange=null,this.flowStartTime=null,this.flowEndTime=null,this.loadFlowData(),this.loadFlowStatistics(),this.flowDialogVisible=!0},queryFlowData:function(){this.flowPageNum=1,this.loadFlowData(),this.loadFlowStatistics()},onFlowDateChange:function(t){if(t&&2===t.length){var e=new Date(t[0]+" 00:00:00"),a=new Date(t[1]+" 23:59:59");this.flowStartTime=Math.floor(e.getTime()/1e3),this.flowEndTime=Math.floor(a.getTime()/1e3)}else this.flowStartTime=null,this.flowEndTime=null},clearFlowDateRange:function(){this.flowDateRange=null,this.flowStartTime=null,this.flowEndTime=null,this.loadFlowData(),this.loadFlowStatistics()},loadFlowData:function(){var t=this;if(this.currentUser.memberCode){var e={memberCode:this.currentUser.memberCode,current:this.flowPageNum,size:this.flowPageSize};this.flowStartTime&&(e.startTime=this.flowStartTime),this.flowEndTime&&(e.endTime=this.flowEndTime),this.$http.get("/msGameRecord/pageByMemberCode",{params:e}).then((function(e){var a=e.data;if(0===a.code){t.flowData=a.data.records||[],t.flowTotal=parseInt(a.data.total)||0;var o=Math.ceil(t.flowTotal/t.flowPageSize);t.flowPageNum>o&&o>0&&(t.flowPageNum=o,t.loadFlowData())}else t.$message.error("获取流水数据失败："+(a.msg||"未知错误"))})).catch((function(e){t.$message.error("获取流水数据失败"),console.error(e)}))}},loadFlowStatistics:function(){var t=this,e={memberCode:this.currentUser.memberCode};this.flowStartTime&&(e.startTime=this.flowStartTime),this.flowEndTime&&(e.endTime=this.flowEndTime),this.$http.get("/msGameRecord/statistics",{params:e}).then((function(e){var a=e.data;0===a.code?t.flowStatistics={totalValidBetAmount:a.data.totalValidBetAmount||0,selectedValidBetAmount:a.data.selectedValidBetAmount||0,totalNetAmount:a.data.totalNetAmount||0,selectedNetAmount:a.data.selectedNetAmount||0}:t.$message.error("获取统计信息失败："+(a.msg||"未知错误"))})).catch((function(e){t.$message.error("获取统计信息失败"),console.error(e)}))},handleFlowSizeChange:function(t){this.flowPageSize=t,this.flowPageNum=1,this.loadFlowData()},handleFlowCurrentChange:function(t){this.flowPageNum=t,this.loadFlowData()},formatTimestamp:function(t){if(!t)return"-";var e=10===t.toString().length?1e3*t:t,a=new Date(e);return a.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-")},formatAmount:function(t){return null==t||void 0===t||""===t?"0.00":(e="number"===typeof t?t:"string"===typeof t?parseFloat(t):parseFloat(String(t)),isNaN(e)?"0.00":e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","));var e}}},l=i,s=a("2877"),c=Object(s["a"])(l,o,r,!1,null,null,null);e["default"]=c.exports},"498a":function(t,e,a){"use strict";var o=a("23e7"),r=a("58a8").trim,n=a("c8d2");o({target:"String",proto:!0,forced:n("trim")},{trim:function(){return r(this)}})},a732:function(t,e,a){"use strict";var o=a("23e7"),r=a("2266"),n=a("59ed"),i=a("825a"),l=a("46c4");o({target:"Iterator",proto:!0,real:!0},{some:function(t){i(this),n(t);var e=l(this),a=0;return r(e,(function(e,o){if(t(e,a++))return o()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},b680:function(t,e,a){"use strict";var o=a("23e7"),r=a("e330"),n=a("5926"),i=a("408a"),l=a("1148"),s=a("d039"),c=RangeError,u=String,m=Math.floor,f=r(l),d=r("".slice),h=r(1..toFixed),w=function(t,e,a){return 0===e?a:e%2===1?w(t,e-1,a*t):w(t*t,e/2,a)},p=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},g=function(t,e,a){var o=-1,r=a;while(++o<6)r+=e*t[o],t[o]=r%1e7,r=m(r/1e7)},b=function(t,e){var a=6,o=0;while(--a>=0)o+=t[a],t[a]=m(o/e),o=o%e*1e7},v=function(t){var e=6,a="";while(--e>=0)if(""!==a||0===e||0!==t[e]){var o=u(t[e]);a=""===a?o:a+f("0",7-o.length)+o}return a},y=s((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!s((function(){h({})}));o({target:"Number",proto:!0,forced:y},{toFixed:function(t){var e,a,o,r,l=i(this),s=n(t),m=[0,0,0,0,0,0],h="",y="0";if(s<0||s>20)throw new c("Incorrect fraction digits");if(l!==l)return"NaN";if(l<=-1e21||l>=1e21)return u(l);if(l<0&&(h="-",l=-l),l>1e-21)if(e=p(l*w(2,69,1))-69,a=e<0?l*w(2,-e,1):l/w(2,e,1),a*=4503599627370496,e=52-e,e>0){g(m,0,a),o=s;while(o>=7)g(m,1e7,0),o-=7;g(m,w(10,o,1),0),o=e-1;while(o>=23)b(m,1<<23),o-=23;b(m,1<<o),g(m,1,1),b(m,2),y=v(m)}else g(m,0,a),g(m,1<<-e,0),y=v(m)+f("0",s);return s>0?(r=y.length,y=h+(r<=s?"0."+f("0",s-r)+y:d(y,0,r-s)+"."+d(y,r-s))):y=h+y,y}})},c8d2:function(t,e,a){"use strict";var o=a("5e77").PROPER,r=a("d039"),n=a("5899"),i="​᠎";t.exports=function(t){return r((function(){return!!n[t]()||i[t]()!==i||o&&n[t].name!==t}))}},fc95:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));a("d3b7");var o=a("b775"),r=function(t){return new Promise((function(e,a){Object(o["a"])({url:"/withdraw/page",method:"get",params:t}).then((function(t){e(t.data)})).catch((function(t){a(t)}))}))},n=function(t){return new Promise((function(e,a){Object(o["a"])({url:"/withdraw/check",method:"post",data:t}).then((function(t){e(t.data)})).catch((function(t){a(t)}))}))},i=function(t){return new Promise((function(e,a){Object(o["a"])({url:"/withdraw/inject",method:"post",data:t}).then((function(t){e(t.data)})).catch((function(t){a(t)}))}))}}}]);